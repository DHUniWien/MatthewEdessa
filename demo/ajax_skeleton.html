<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="http://code.jquery.com/jquery-2.1.4.min.js" type="application/javascript" charset="UTF-8"></script>
    <script>
        var non_async_request = function(url) {
            jQuery.ajax({
                async: false,
                type: "GET",
                url: url,
                contentType: "application/json; charset=UTF-8",
                beforeSend: function(xhr) {xhr.setRequestHeader("Authorization", "Basic bmVvNGo6Y3lLLUplay1WYQ==");},
                success: function (result, status, xhr) {
                    $('#reading').append(" " + result.data['text']);
                },
                error: function (xhr, status, error) {
                    // an error occurred!
                    var a = 0;
                }
            });
        }

        var request_data = {query: "match (n)<-[:TRANS_BEGIN]-(t)-[:TRANS_END]->(m) return t, n, m;", params: {}};
        request_json_data = JSON.stringify(request_data);
        jQuery.ajax({
            type: "POST",
            url: "http://storage.stemmaweb.net:7474/db/data/cypher",
            contentType: "application/json; charset=UTF-8",
            dataType: "json",
            data: request_json_data,
            beforeSend: function(xhr) {xhr.setRequestHeader("Authorization", "Basic bmVvNGo6Y3lLLUplay1WYQ==");},
            // or beforeSend: function(xhr) {xhr.setRequestHeader("Authorization", "Basic " + btoa(username + ":" + password)); };

            success: function(result,status,xhr) {
                // do something with the result
                var a = 0;
                data = result.data[0];
                translation = data[0];
                trans_begin = data[1];
                trans_end = data[2];
                $('#translation').append(translation.data['text']);

                // get one shortest path between then ":TRANS_BEGIN" and ":TRANS_END" nodes
                var sub_request_data = {};
                sub_request_data['to'] = trans_end['self'];
                sub_request_data['max_depth'] = 1000;
                sub_request_data['relationships'] = {type: "SEQUENCE", direction: "out"};
                sub_request_data['algorithm'] = "shortestPath";

                sub_request_json_data = JSON.stringify(sub_request_data);
                jQuery.ajax({
                    type: "POST",
                    url: trans_begin['self'] + "/path",
                    contentType: "application/json; charset=UTF-8",
                    dataType: "json",
                    data: sub_request_json_data,
                    beforeSend: function(xhr) {xhr.setRequestHeader("Authorization", "Basic bmVvNGo6Y3lLLUplay1WYQ==");},

                    success: function(sub_result,sub_status,sub_xhr) {
                        // print the 'text'-property for each node
                        for (i in sub_result['nodes']) {
                            non_async_request(sub_result['nodes'][i]);
                        }
                    },
                    error: function(xhr,status,error) {
                        // an error occurred!
                        var a = 0;
                    }
                });
            },
            error: function(xhr,status,error) {
                // an error occurred!
                var a = 0;
            }
        });
    </script>
</head>
    <div id="reading"></div><br/><br/>
    <div id="translation"></div>
</body>
</html>